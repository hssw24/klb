<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Klassenbuch — Einstellungen</title>
  <style>
    body{font-family:Arial,Helvetica,sans-serif;padding:12px;background:#f4f6f8;color:#111}
    header{display:flex;justify-content:space-between;align-items:center;max-width:980px;margin:0 auto}
    h2{margin:0}
    .card{background:#fff;padding:12px;border-radius:8px;box-shadow:0 1px 3px rgba(0,0,0,.06);max-width:980px;margin:12px auto}
    .small{font-size:0.95rem;color:#444;margin-bottom:8px}
    button{padding:8px 12px;border-radius:6px;border:none;background:#0b6cff;color:#fff;cursor:pointer}
    .muted{background:#888}
  </style>
</head>
<body>
  <header>
    <h2>Einstellungen</h2>
    <div><a href="index.html" style="text-decoration:none;color:inherit">Zurück</a></div>
  </header>

  <div class="card">
    <div class="small">Lehrer Filter</div>
    <div id="teacherFilterContainer">Lade Filter…</div>
  </div>

  <script>
    // Lädt das kleine Widget teacher-filter.html inline und führt enthaltene Skripte aus.
    (async function(){
      const container = document.getElementById('teacherFilterContainer');
      try {
        const resp = await fetch('teacher-filter.html');
        if (!resp.ok) { container.textContent = 'Filter konnte nicht geladen werden'; return; }
        const html = await resp.text();
        // Setze HTML
        const wrapper = document.createElement('div');
        wrapper.innerHTML = html;
        // Extrahiere Scripts und entferne sie aus wrapper
        const scripts = Array.from(wrapper.querySelectorAll('script'));
        scripts.forEach(s => s.remove());
        container.innerHTML = wrapper.innerHTML;
        // Führe Scripts nacheinander aus
        for (const s of scripts) {
          const code = s.textContent || s.innerText || '';
          if (!code.trim()) continue;
          const sc = document.createElement('script');
          sc.type = 'text/javascript';
          sc.text = code;
          container.appendChild(sc);
        }
        // Falls das Widget eine Update-Funktion exposed, rufe sie an
        if (typeof window.updateTeacherFilterWidget === 'function') {
          try { window.updateTeacherFilterWidget(); } catch(e){ /* ignore */ }
        }
      } catch (err) {
        console.error('load teacher-filter error', err);
        container.textContent = 'Fehler beim Laden des Filters';
      }
    })();
  </script>
</body>
</html>
